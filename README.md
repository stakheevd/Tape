# Устройство хранения данных "Лента"
---
## Описание программы

### Конфигурация ленты

Устройство хранения данных "Лента" реализовано в классе Tape. 

Конфигурирование работы ленты (эмуляция задержек чтения/записи в миллисекундах) осуществляется при помощьи структуры Configuration, поля которой инициализируются значениями из файла *config.txt*. 

**NB:** Могут быть добавлены дополнительные параметры конфигурации без необходимости изменения конструктора класса Tape.

В случае ввода отрицательного значения задержки, программа завершит работу с соответствующим сообщением об ошибке. Если файл *config.txt* пуст или содержит символы, отличные от целых чисел, значение задержки инициализируется значением 0.

### Алгоритм сортировки

В качестве алгоритма сортировки был использован *алгоритм сортировки сериями* (серия -  отсортированная по возрастанию последовательность чисел):
1. Пусть данные исходной ленты - это серии, длина которых = 1 (число само по себе является отсортированным);
2. Разобъём исходную ленту на 2 ленты - серии с чётными индексами на одну ленту, с нечётными на другую;
3. Последовательно сравниваем элементы получившихся лент с одинаковыми индексами и записываем их на исходную ленту в порядке возрастания;
4. В результате выполнения пунктов №2 и №3 исходная лента представляет собой последовательность из серий длины 2;
5. Повторяем пункты №2 и №3 для серий длины 2;
6. После выполнения пункта №5 исходная лента состоит из серий длины 4;
7. Аналогичным образом повторяем разбиение и сравнение элементов, пока длина серий не станет равной (или не превысит) длине исходной ленты.

Анализ алгоритма:
* Общее количество проходов: logN, где N - число элементов исходной ленты;
* Сложность по времени: N\*logN - количество операций на одном проходе \* количество проходов;
* Сложность по памяти: O(1) - в процессе сортировки в памяти хранится только по одному элементу с каждой временной ленты;
* Для сортировки исходной ленты было использовано 2 временные ленты.

### Алгоритм работы программы

На вход программа получает название файла, содержащего целые числа в виде:

-4 3 -2 1 0 -1 2 -3 4 - в одну строку, через пробел.

Если был встречен символ, отличный от целого числа, программа выведет соответствующее сообщение об ошибке и отсортирует значения, предшествующие этому символу.

**NB:** Пустой файл - отсортированный файл.

После завершения сортировки выводится название файла, в который сохранён результат (**он же является входным файлом**), и время в миллисекундах, затраченное на сортировку.

Использование (FILE_NAME - название входного файла):

	./main FILE_NAME

---

## Генератор случайных чисел (ГСЧ)

Генератор случайных чисел реализован в файле generator.cpp. Основан на законе равномерного распределения. Генерирует случайное число от INT32_MIN до INT32_MAN.

Использование (N - требуемое число случайных величин): 

	./generator N

В результате будет сгенерирован файл numbers_N.txt, содержащий N случайных чисел в случайном порядке.

---

## Unit-тестирование

Unit-тестирование осуществляется при помощи библиотеки [GoogleTest](https://github.com/google/googletest). Сами unit-тесты реализованы в файле unit-tests.cpp. Первые 8 тестов проверяют корректность сортировки файлов, содержащих 0, 1, 100, 1000, 10000, 100000, 1000000, 10000000 чисел соответственно. 
Ещё один тест проверяет корректность сортировки данных, предшествующих некорректному символу.

---

## Использование

**NB:** Для компиляции файлов проекта был использован компилятор Clang.

Поддерживаемые цели:

`build`: компиляция программы и ГСЧ; создание *config.txt*

	$ make build

`run`: запуск построенной программы (FILE_NAME - название входного файла)

	$ make run fname=FILE_NAME

`test`: компиляция ГСЧ и unit-тестов, подготовка файлов для тестирования, запуск тестов

	$ make test

`clean`: удаление файлов временных лент из директории /tmp и файлов для тестирования

	$ make clean

`all`: компиляция файлов проекта и запуск тестов

	$ make 